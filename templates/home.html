{% extends "base.html" %}
{% from "macros.html" import _ %}

{% block content %}
<div class="panel">
  <h1 class="mb-4">üè† {{ translate("Dashboard") }}</h1>

  <p>
    {{ translate("Welcome") }}, <strong>{{ nickname }}</strong>!
  </p>

  {% if nickname == "ADMIN" %}
    <h2>{{ "Overall stats"|t }}</h2>
    <p>
      {{ translate("Total users:") }} {{ totale_utenti }}<br>
      {{ trnslate("Average score:") }} {{ media_punti }}
    </p>
    <h3>{{ translate("Recently rewarded (last 7 days)") }}</h3>
    <ul>
      {% for n in premiati_recenti %}
        <li>{{ n }}</li>
      {% endfor %}
    </ul>
  {% else %}
    <h2>{{ translate("Your progress") }}</h2>
    <p>
      {{ "Points collected:"|t }} <strong>{{ punti }}</strong><br>
      {{ "Points to prize:"|t }} <strong>{{ punti_mancanti }}</strong><br>
      {{ "Completion:"|t }} <strong>{{ percentuale }}%</strong>
    </p>
    <a href="{{ url_for('Robiettivi') }}" class="btn btn-primary">
      {{ "View Goals"|t }}
    </a>
  {% endif %}

  <div class="mt-4">
    <a href="{{ url_for('logout') }}" class="btn btn-outline-danger">
      {{ "Logout"|t }}
    </a>
  </div>
</div>
{% endblock %}
